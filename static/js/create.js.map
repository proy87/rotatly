{
  "version": 3,
  "file": "create.js",
  "sourceRoot": "\\",
  "sources": [
    "create.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,iBAAA,EAAA,iBAAA,EAAA,YAAA,EAAA,GAAA,EAAA,QAAA,EAAA,UAAA,EAAA,aAAA,EAAA,WAAA,EAAA,kBAAA,EAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA,WAAA,EAAA,kBAAA,EAAA,YAAA,EAAA,WAAA,EAAA,GAAA,EAAA,WAAA,EAAA,QAAA,EAAA,gBAAA,EAAA;;EAAA,gBAAA,GAAmB;;EACnB,QAAA,GAAW;IAAC,UAAA,EAAY,IAAb;IAAmB,UAAA,EAAY;EAA/B;;EACX,YAAA,GAAe,CAAC,GAAG,QAAQ,CAAC,gBAAT,CAA0B,gCAA1B,CAAJ;;EACf,WAAA,GAAc,QAAQ,CAAC,aAAT,CAAuB,+BAAvB;;EACd,QAAA,GAAW,QAAQ,CAAC,aAAT,CAAuB,iBAAvB;;EACX,kBAAA,GAAqB,QAAQ,CAAC,aAAT,CAAuB,sCAAvB;;EAErB,iBAAA,GAAoB,QAAQ,CAAC,cAAT,CAAwB,eAAxB;;EACpB,iBAAA,GAAoB,QAAQ,CAAC,cAAT,CAAwB,eAAxB;;EAEpB,YAAA,GAAe,QAAA,CAAC,GAAD,EAAM,MAAN,EAAc,aAAa,KAA3B,CAAA;AACf,QAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,GAAA,EAAA,IAAA,EAAA,QAAA,EAAA,SAAA,EAAA,WAAA,EAAA;IAAE,MAAM,CAAC,YAAP,CAAoB,YAApB,EAAkC,GAAG,CAAC,YAAJ,CAAiB,YAAjB,CAAlC;IACA,SAAA,GAAY,GAAG,CAAC,aAAJ,CAAkB,OAAlB;IACZ,YAAA,GAAe,MAAM,CAAC,aAAP,CAAqB,OAArB;IACf,KAAS,gGAAT;MACE,KAAS,8GAAT;QACE,WAAA,GAAc,YAAY,CAAC,IAAI,CAAC,CAAD,CAAG,CAAC,KAAK,CAAC,CAAD;QACxC,QAAA,GAAW,SAAS,CAAC,IAAI,CAAC,CAAD,CAAG,CAAC,KAAK,CAAC,CAAD;QAClC,WAAW,CAAC,YAAZ,CAAyB,YAAzB,EAAuC,QAAQ,CAAC,YAAT,CAAsB,YAAtB,CAAvC;QACA,IAAG,UAAH;UACE,WAAA,CAAY,WAAZ,EAAyB,iBAAzB,EAA4C,YAA5C,EAA0D,YAA1D,EADF;;MAJF;IADF;WAOA,MAAM,CAAC,aAAP,CAAqB,eAArB,CAAqC,CAAC,SAAtC,GAAkD,GAAG,CAAC,aAAJ,CAAkB,eAAlB,CAAkC,CAAC;EAXxE;;EAaf,YAAY,CAAC,OAAb,CAAqB,QAAA,CAAC,OAAD,CAAA;WACnB,OAAO,CAAC,gBAAR,CAAyB,OAAzB,EAAkC,QAAA,CAAA,CAAA;MAChC,IAAG,gBAAH;QACE,gBAAgB,CAAC,SAAS,CAAC,MAA3B,CAAkC,UAAlC;QACA,IAAG,gBAAA,KAAoB,IAAvB;UACE,YAAA,CAAa,kBAAb,EAAiC,WAAjC,EAA8C,IAA9C;UACA,YAAA,CAAa,kBAAb,EAAiC,QAAjC;UACA,gBAAA,GAAmB;AACnB,iBAJF;SAFF;;MAOA,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,UAAnB;MACA,gBAAA,GAAmB;MACnB,YAAA,CAAa,gBAAb,EAA+B,WAA/B,EAA4C,IAA5C;aACA,YAAA,CAAa,gBAAb,EAA+B,QAA/B;IAXgC,CAAlC;EADmB,CAArB;;EAgBA,kBAAA,GAAqB,QAAA,CAAC,QAAD,CAAA;IACnB,IAAG,QAAQ,CAAC,QAAD,CAAX;MACE,QAAQ,CAAC,QAAD,CAAU,CAAC,SAAS,CAAC,MAA7B,CAAoC,UAApC;MACA,IAAG,QAAQ,CAAC,QAAD,CAAR,KAAsB,IAAzB;QACE,QAAQ,CAAC,QAAD,CAAR,GAAqB;AACrB,eAFF;OAFF;;IAKA,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,UAAnB;WACA,QAAQ,CAAC,QAAD,CAAR,GAAqB;EAPF;;EAUrB,WAAA,GAAc,QAAA,CAAC,WAAD,EAAc,KAAd,EAAqB,IAArB,EAA2B,OAA3B,EAAoC,UAApC,EAAgD,GAAhD,CAAA;AACd,QAAA,IAAA,EAAA,GAAA,EAAA,QAAA,EAAA,CAAA,EAAA,GAAA,EAAA,QAAA,EAAA;IAAE,KAAA,GAAQ,QAAA,CAAS,KAAT;IACR,QAAA,GAAW,QAAQ,CAAC,aAAT,CAAuB,KAAvB;IACX,QAAQ,CAAC,SAAS,CAAC,GAAnB,CAAuB,UAAvB;IACA,QAAQ,CAAC,SAAS,CAAC,GAAnB,CAAuB,WAAvB;IACA,QAAQ,CAAC,YAAT,CAAsB,YAAtB,EAAoC,WAApC;IACA,QAAQ,CAAC,YAAT,CAAsB,YAAtB,EAAoC,KAApC;IACA,QAAQ,CAAC,YAAT,CAAsB,WAAtB,EAAmC,IAAnC;IACA,QAAQ,CAAC,SAAT,GAAqB;IACrB,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,EAAmC,QAAA,CAAA,CAAA;aACjC,kBAAkB,CAAC,IAAnB,CAAwB,IAAxB,EAA8B,GAA9B;IADiC,CAAnC;IAGA,QAAA,GAAW;AACX;IAAA,KAAA,qCAAA;;MACE,GAAA,GAAM,QAAA,CAAS,IAAI,CAAC,YAAL,CAAkB,YAAlB,CAAT;MACN,IAAG,GAAA,IAAO,KAAV;QACE,QAAA,GAAW;QACX,IAAG,GAAA,KAAO,KAAV;UACE,IAAI,CAAC,MAAL,CAAY,QAAZ,EADF;;AAEA,cAJF;;IAFF;IAQA,IAAG,CAAI,QAAP;aACE,OAAO,CAAC,WAAR,CAAoB,QAApB,EADF;;EArBY;;EAwBd,WAAA,GAAc,QAAA,CAAC,IAAD,EAAO,OAAP,EAAgB,UAAhB,EAA4B,GAA5B,CAAA;AACd,QAAA,WAAA,EAAA;IAAE,WAAA,GAAc,IAAI,CAAC,YAAL,CAAkB,YAAlB;IACd,IAAG,WAAH;MACE,IAAI,CAAC,SAAS,CAAC,MAAf,CAAsB,WAAtB;MACA,WAAA,CAAY,IAAI,CAAC,YAAL,CAAkB,YAAlB,CAAZ,EACE,IAAI,CAAC,YAAL,CAAkB,YAAlB,CADF,EACmC,IAAI,CAAC,YAAL,CAAkB,WAAlB,CADnC,EACmE,OADnE,EAEE,UAFF,EAEc,GAFd,EAFF;;IAKA,IAAI,CAAC,eAAL,CAAqB,YAArB;IACA,IAAI,CAAC,eAAL,CAAqB,YAArB;IACA,IAAI,CAAC,eAAL,CAAqB,WAArB;IACA,IAAA,GAAO,IAAI,CAAC,aAAL,CAAmB,MAAnB;IACP,IAAG,IAAH;aACE,IAAI,CAAC,SAAL,GAAiB,GADnB;;EAXY;;EAcd,QAAA,GAAW,QAAA,CAAC,IAAD,EAAO,KAAP,EAAc,KAAd,EAAqB,IAArB,CAAA;AACX,QAAA;IAAE,gBAAA,GAAmB,IAAI,CAAC,YAAL,CAAkB,YAAlB;IACnB,IAAG,gBAAH;MACE,IAAI,CAAC,SAAS,CAAC,MAAf,CAAsB,gBAAtB,EADF;;IAEA,IAAI,CAAC,SAAS,CAAC,GAAf,CAAmB,KAAnB;IACA,IAAI,CAAC,YAAL,CAAkB,YAAlB,EAAgC,KAAhC;IACA,IAAI,CAAC,YAAL,CAAkB,YAAlB,EAAgC,KAAhC;IACA,IAAI,CAAC,YAAL,CAAkB,WAAlB,EAA+B,IAA/B;IACA,IAAG,IAAH;aACE,IAAI,CAAC,aAAL,CAAmB,MAAnB,CAA0B,CAAC,SAA3B,GAAuC,KADzC;;EARS;;EAYX,aAAA,GAAgB,QAAA,CAAC,GAAD,EAAM,UAAN,EAAkB,GAAlB,EAAuB,WAAvB,CAAA;AAChB,QAAA,IAAA,EAAA,CAAA,EAAA,GAAA,EAAA;AAAE;IAAA,KAAA,qCAAA;;MACE,IAAI,CAAC,gBAAL,CAAsB,OAAtB,EAA+B,QAAA,CAAA,CAAA;eAC7B,kBAAkB,CAAC,IAAnB,CAAwB,IAAxB,EAA8B,GAA9B;MAD6B,CAA/B;IADF;WAIA,GAAG,CAAC,gBAAJ,CAAqB,IAArB,CAA0B,CAAC,OAA3B,CAAmC,QAAA,CAAC,IAAD,CAAA;aACjC,IAAI,CAAC,gBAAL,CAAsB,OAAtB,EAA+B,QAAA,CAAA,CAAA;AACnC,YAAA,gBAAA,EAAA,KAAA,EAAA,KAAA,EAAA,IAAA,EAAA,cAAA,EAAA;QAAM,KAAA,GAAQ,IAAI,CAAC,YAAL,CAAkB,YAAlB;QACR,cAAA,GAAiB,QAAQ,CAAC,GAAD;QACzB,IAAG,cAAH;UACE,gBAAA,GAAmB,IAAI,CAAC,YAAL,CAAkB,YAAlB;UACnB,IAAG,gBAAH;YACE,WAAA,CAAY,gBAAZ,EAA8B,IAAI,CAAC,YAAL,CAAkB,YAAlB,CAA9B,EAA+D,IAAI,CAAC,YAAL,CAAkB,WAAlB,CAA/D,EACE,WADF,EACe,UADf,EAC2B,GAD3B,EADF;;UAGA,KAAA,GAAQ,cAAc,CAAC,YAAf,CAA4B,YAA5B;UACR,KAAA,GAAQ,cAAc,CAAC,YAAf,CAA4B,YAA5B;UACR,IAAA,GAAO,cAAc,CAAC,YAAf,CAA4B,WAA5B;UACP,IAAG,GAAA,KAAO,YAAV;YACE,GAAG,CAAC,gBAAJ,CAAqB,CAAA,eAAA,CAAA,CAAkB,KAAlB,CAAA,EAAA,CAArB,CAAiD,CAAC,OAAlD,CAA0D,QAAA,CAAC,CAAD,CAAA;qBACxD,QAAA,CAAS,CAAT,EAAY,KAAZ,EAAmB,KAAnB,EAA0B,IAA1B;YADwD,CAA1D,EADF;WAAA,MAAA;YAKE,QAAA,CAAS,IAAT,EAAe,KAAf,EAAsB,KAAtB,EAA6B,IAA7B,EALF;;UAMA,IAAG,GAAG,CAAC,gBAAJ,CAAqB,CAAA,CAAA,CAAA,CAAI,KAAJ,CAAA,CAArB,CAAiC,CAAC,MAAlC,IAA4C,CAA/C;YACE,cAAc,CAAC,MAAf,CAAA,EADF;WAAA,MAAA;YAGE,cAAc,CAAC,SAAS,CAAC,MAAzB,CAAgC,UAAhC,EAHF;;iBAIA,QAAQ,CAAC,GAAD,CAAR,GAAgB,KAlBlB;SAAA,MAAA;UAoBE,gBAAA,GAAmB,IAAI,CAAC,YAAL,CAAkB,YAAlB;UACnB,IAAG,gBAAH;YACE,IAAG,GAAA,KAAO,YAAV;qBACE,GAAG,CAAC,gBAAJ,CAAqB,CAAA,eAAA,CAAA,CAAkB,KAAlB,CAAA,EAAA,CAArB,CAAiD,CAAC,OAAlD,CAA0D,QAAA,CAAC,CAAD,CAAA;uBACxD,WAAA,CAAY,CAAZ,EAAe,WAAf,EAA4B,UAA5B,EAAwC,GAAxC;cADwD,CAA1D,EADF;aAAA,MAAA;qBAKE,WAAA,CAAY,IAAZ,EAAkB,WAAlB,EAA+B,UAA/B,EAA2C,GAA3C,EALF;aADF;WArBF;;MAH6B,CAA/B;IADiC,CAAnC;EALc;;AAwChB;EAAA,KAAA,qCAAA;IAAI,CAAC,GAAD,EAAM,UAAN,EAAkB,GAAlB,EAAuB,WAAvB;IAEF,aAAA,CAAc,GAAd,EAAmB,UAAnB,EAA+B,GAA/B,EAAoC,WAApC;EAFF;;EAIA,QAAQ,CAAC,gBAAT,CAA0B,OAA1B,CAAkC,CAAC,OAAnC,CAA2C,QAAA,CAAC,IAAD,CAAA;WACzC,IAAI,CAAC,gBAAL,CAAsB,OAAtB,EAA+B,QAAA,CAAA,CAAA;aAC7B,IAAI,CAAC,SAAS,CAAC,MAAf,CAAsB,UAAtB;IAD6B,CAA/B;EADyC,CAA3C;AA/IA",
  "sourcesContent": [
    "selected_outline = null\r\nselected = {color_icon: null, board_item: null}\r\noutlines_dom = [...document.querySelectorAll('#outlines > .outline-container')]\r\noutline_dom = document.querySelector('#outline > .outline-container')\r\ngame_dom = document.querySelector('#game-container')\r\noutline_hidden_dom = document.querySelector('#outline-hidden > .outline-container')\r\n\r\ncolor_palette_dom = document.getElementById(\"color-palette\")\r\nboard_palette_dom = document.getElementById(\"board-palette\")\r\n\r\ncopy_outline = (src, target, erase_data = false)->\r\n  target.setAttribute('data-index', src.getAttribute('data-index'))\r\n  src_table = src.querySelector('table')\r\n  target_table = target.querySelector('table')\r\n  for i in [0...src_table.rows.length]\r\n    for j in [0...src_table.rows[0].cells.length]\r\n      target_cell = target_table.rows[i].cells[j]\r\n      src_cell = src_table.rows[i].cells[j]\r\n      target_cell.setAttribute('data-value', src_cell.getAttribute('data-value'))\r\n      if erase_data\r\n        remove_data(target_cell, color_palette_dom, 'color-icon', 'color_icon')\r\n  target.querySelector('.outline-grid').innerHTML = src.querySelector('.outline-grid').innerHTML\r\n\r\noutlines_dom.forEach((outline)->\r\n  outline.addEventListener('click', ->\r\n    if selected_outline\r\n      selected_outline.classList.remove('selected');\r\n      if selected_outline == this\r\n        copy_outline(outline_hidden_dom, outline_dom, true)\r\n        copy_outline(outline_hidden_dom, game_dom)\r\n        selected_outline = null\r\n        return\r\n    this.classList.add('selected')\r\n    selected_outline = this\r\n    copy_outline(selected_outline, outline_dom, true)\r\n    copy_outline(selected_outline, game_dom)\r\n  )\r\n)\r\n\r\nitem_click_handler = (property) ->\r\n  if selected[property]\r\n    selected[property].classList.remove('selected');\r\n    if selected[property] == this\r\n      selected[property] = null\r\n      return\r\n  this.classList.add('selected')\r\n  selected[property] = this\r\n\r\n\r\ninsert_icon = (color_class, index, name, palette, icon_class, key)->\r\n  index = parseInt(index)\r\n  new_icon = document.createElement('div')\r\n  new_icon.classList.add(icon_class)\r\n  new_icon.classList.add(color_class)\r\n  new_icon.setAttribute('data-class', color_class)\r\n  new_icon.setAttribute('data-index', index)\r\n  new_icon.setAttribute('data-name', name)\r\n  new_icon.innerHTML = name\r\n  new_icon.addEventListener('click', ->\r\n    item_click_handler.call(this, key)\r\n  )\r\n  inserted = false\r\n  for icon in palette.getElementsByClassName(icon_class)\r\n    idx = parseInt(icon.getAttribute('data-index'))\r\n    if idx >= index\r\n      inserted = true\r\n      if idx != index\r\n        icon.before(new_icon)\r\n      break\r\n\r\n  if not inserted\r\n    palette.appendChild(new_icon)\r\n\r\nremove_data = (cell, palette, icon_class, key)->\r\n  color_class = cell.getAttribute('data-class')\r\n  if color_class\r\n    cell.classList.remove(color_class)\r\n    insert_icon(cell.getAttribute('data-class'),\r\n      cell.getAttribute('data-index'), cell.getAttribute('data-name'), palette,\r\n      icon_class, key)\r\n  cell.removeAttribute('data-class')\r\n  cell.removeAttribute('data-index')\r\n  cell.removeAttribute('data-name')\r\n  span = cell.querySelector('span')\r\n  if span\r\n    span.innerHTML = ''\r\n\r\nset_data = (cell, klass, index, name)->\r\n  cell_color_class = cell.getAttribute('data-class')\r\n  if cell_color_class\r\n    cell.classList.remove(cell_color_class)\r\n  cell.classList.add(klass)\r\n  cell.setAttribute('data-class', klass)\r\n  cell.setAttribute('data-index', index)\r\n  cell.setAttribute('data-name', name)\r\n  if name\r\n    cell.querySelector('span').innerHTML = name\r\n\r\n\r\ninit_handlers = (key, icon_class, dom, palette_dom)->\r\n  for item in palette_dom.getElementsByClassName(icon_class)\r\n    item.addEventListener('click', ->\r\n      item_click_handler.call(this, key)\r\n    )\r\n  dom.querySelectorAll('td').forEach((cell) ->\r\n    cell.addEventListener(\"click\", ->\r\n      value = cell.getAttribute('data-value')\r\n      selected_value = selected[key]\r\n      if selected_value\r\n        cell_color_class = cell.getAttribute('data-class')\r\n        if cell_color_class\r\n          insert_icon(cell_color_class, cell.getAttribute('data-index'), cell.getAttribute('data-name'),\r\n            palette_dom, icon_class, key)\r\n        klass = selected_value.getAttribute('data-class')\r\n        index = selected_value.getAttribute('data-index')\r\n        name = selected_value.getAttribute('data-name')\r\n        if key == 'color_icon'\r\n          dom.querySelectorAll(\"td[data-value='#{value}']\").forEach((c)->\r\n            set_data(c, klass, index, name)\r\n          )\r\n        else\r\n          set_data(cell, klass, index, name)\r\n        if dom.querySelectorAll(\".#{klass}\").length >= 4\r\n          selected_value.remove()\r\n        else\r\n          selected_value.classList.remove('selected')\r\n        selected[key] = null\r\n      else\r\n        cell_color_class = cell.getAttribute('data-class')\r\n        if cell_color_class\r\n          if key == 'color_icon'\r\n            dom.querySelectorAll(\"td[data-value='#{value}']\").forEach((c)->\r\n              remove_data(c, palette_dom, icon_class, key)\r\n            )\r\n          else\r\n            remove_data(cell, palette_dom, icon_class, key)\r\n    )\r\n  )\r\n\r\nfor [key, icon_class, dom, palette_dom] in [['color_icon', 'color-icon', outline_dom, color_palette_dom],\r\n  ['board_item', 'board-item', game_dom, board_palette_dom]]\r\n  init_handlers(key, icon_class, dom, palette_dom)\r\n\r\ndocument.querySelectorAll('.node').forEach((node)->\r\n  node.addEventListener('click', ->\r\n    node.classList.toggle('disabled')\r\n  )\r\n)"
  ]
}