{
  "version": 3,
  "file": "create.js",
  "sourceRoot": "\\",
  "sources": [
    "create.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "selected_color_icon = null\r\ngame_dom = document.querySelector('#game-container')\r\ngame_board = game_dom.querySelector('table')\r\ngame_grid = game_dom.querySelector('.outline-grid')\r\noutline_dom = document.querySelector('#outline')\r\noutline_board = outline_dom.querySelector('table')\r\n\r\nN = outline_board.rows.length\r\nM = outline_board.rows[0].cells.length\r\n\r\ncolor_palette_dom = document.getElementById(\"color-palette\")\r\nboard_palette_dom = document.getElementById(\"board-palette\")\r\n\r\nfor item in color_palette_dom.getElementsByClassName('color-icon')\r\n  item.addEventListener('click', ->\r\n    if selected_color_icon\r\n      selected_color_icon.classList.remove('selected')\r\n      if selected_color_icon == this\r\n        selected_color_icon = null\r\n        return\r\n    this.classList.add('selected')\r\n    selected_color_icon = this\r\n  )\r\n\r\nremove_data = (el, palette)->\r\n  color_class = el.getAttribute('data-class')\r\n  if color_class\r\n    el.classList.remove(color_class)\r\n    window.show_element(palette.querySelector(\".#{color_class}\"))\r\n  el.removeAttribute('data-class')\r\n  el.removeAttribute('data-name')\r\n  span = el.querySelector('span')\r\n  if span\r\n    span.innerHTML = ''\r\n\r\nset_data = (target, source, palette)->\r\n  remove_data(target, palette)\r\n  if source\r\n    klass = source.getAttribute('data-class')\r\n    name = source.getAttribute('data-name')\r\n    target.classList.add(klass)\r\n    target.setAttribute('data-class', klass)\r\n    target.setAttribute('data-name', name)\r\n    if name\r\n      target.querySelector('span').innerHTML = name\r\n\r\ngame_board.querySelectorAll('td').forEach((cell) ->\r\n  cell.addEventListener(\"click\", ->\r\n    remove_data(cell, board_palette_dom)\r\n  )\r\n)\r\n\r\ndraggable_item_clone = null\r\ncreate_clone = (source, click_listener = null)->\r\n  clone = source.cloneNode(true)\r\n  clone.style.position = 'absolute'\r\n  clone.style.left = source.offsetLeft + 'px'\r\n  clone.style.top = source.offsetTop + 'px'\r\n  if click_listener\r\n    clone.addEventListener('click', click_listener)\r\n  source.after(clone)\r\n  return clone\r\n\r\n\r\ninteract('.board-item').draggable(\r\n  onstart: (evt)->\r\n    draggable_item_clone = create_clone(evt.target)\r\n  onmove: (evt)->\r\n    el = evt.target\r\n\r\n    x = (parseFloat(el.dataset.x) || 0) + evt.dx\r\n    y = (parseFloat(el.dataset.y) || 0) + evt.dy\r\n    el.style.transform = \"translate(#{x}px, #{y}px)\"\r\n    el.dataset.x = x\r\n    el.dataset.y = y\r\n  onend: (evt)->\r\n    el = evt.target\r\n    el.style.transform = ''\r\n    el.removeAttribute('data-x')\r\n    el.removeAttribute('data-y')\r\n    draggable_item_clone.remove()\r\n    draggable_item_clone = null\r\n).styleCursor(false)\r\n\r\ninteract('#game-container td').dropzone(\r\n  accept: '.board-item'\r\n  overlap: 0.75,\r\n  ondrop: (evt)->\r\n    el = evt.target\r\n    selected_value = evt.relatedTarget\r\n    klass = selected_value.getAttribute('data-class')\r\n    set_data(el, selected_value, board_palette_dom)\r\n    if game_dom.querySelectorAll(\".#{klass}\").length >= 4\r\n      window.hide_element(selected_value)\r\n)\r\n\r\ntetramino_click_handler = ->\r\n  if not this.classList.contains('snapped')\r\n    angle = parseInt(this.dataset.rotationAngle)\r\n    if angle >= 270\r\n      this.classList.remove('animate')\r\n      angle -= 360\r\n      this.style.setProperty('--rotation', \"#{angle}deg\")\r\n      this.offsetHeight\r\n      this.classList.add('animate')\r\n\r\n    this.dataset.rotationAngle = angle + 90\r\n    this.style.setProperty('--rotation', \"#{this.dataset.rotationAngle}deg\")\r\n\r\ntetramino_color_click_handler = ->\r\n  this.parentNode.querySelectorAll('.cell').forEach((c)->\r\n    set_data(c, selected_color_icon, color_palette_dom)\r\n  )\r\n  if selected_color_icon\r\n    window.hide_element(selected_color_icon)\r\n    selected_color_icon.classList.remove('selected')\r\n    selected_color_icon = null\r\n\r\ndocument.querySelectorAll('.tetramino').forEach((t)->\r\n  if not t.classList.contains('tet-O')\r\n    t.dataset.rotationAngle = 0\r\n    t.addEventListener('click', tetramino_click_handler)\r\n)\r\n\r\nget_tetramino_data = (el)->\r\n  cell_size = parseFloat(getComputedStyle(el.querySelector('.cell')).width)\r\n  range = cell_size / 2\r\n  rotation_angle = (parseInt(el.dataset.rotationAngle) or 0) % 360\r\n\r\n  [row_array, col_array] = [null, null]\r\n  if el.classList.contains('tet-O')\r\n    [row_array, col_array] = [[0...N - 1], [0...M - 1]]\r\n  else if el.classList.contains('tet-I')\r\n    if rotation_angle == 0\r\n      [row_array, col_array] = [[0...N], [0...1]]\r\n    else if rotation_angle == 90\r\n      [row_array, col_array] = [[0...1], [0...M]]\r\n    else if rotation_angle == 180\r\n      [row_array, col_array] = [[0...N], [0...1]]\r\n    else if rotation_angle == 270\r\n      [row_array, col_array] = [[0...1], [0...M]]\r\n  else if el.classList.contains('tet-T')\r\n    if rotation_angle == 0\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 90\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n    else if rotation_angle == 180\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 270\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n  else if el.classList.contains('tet-L')\r\n    if rotation_angle == 0\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 90\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n    else if rotation_angle == 180\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 270\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n  else if el.classList.contains('tet-J')\r\n    if rotation_angle == 0\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 90\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n    else if rotation_angle == 180\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 270\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n  else if el.classList.contains('tet-S')\r\n    if rotation_angle == 0\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 90\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n    else if rotation_angle == 180\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 270\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n  else if el.classList.contains('tet-Z')\r\n    if rotation_angle == 0\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 90\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n    else if rotation_angle == 180\r\n      [row_array, col_array] = [[0...N - 1], [0...M - 2]]\r\n    else if rotation_angle == 270\r\n      [row_array, col_array] = [[0...N - 2], [0...M - 1]]\r\n\r\n  return {\r\n    row_array: row_array,\r\n    col_array: col_array,\r\n    cell_size: cell_size,\r\n    range: range\r\n  }\r\n\r\nget_tetramino_indices = (el, row, col)->\r\n  rotation_angle = (parseInt(el.dataset.rotationAngle) or 0) % 360\r\n  cells = []\r\n  if el.classList.contains('tet-O')\r\n    cells = [[row, col], [row, col + 1], [row + 1, col], [row + 1, col + 1]]\r\n  else if el.classList.contains('tet-I')\r\n    if rotation_angle == 0\r\n      cells = [[row, col], [row, col + 1], [row, col + 2], [row, col + 3]]\r\n    else if rotation_angle == 90\r\n      cells = [[row, col], [row + 1, col], [row + 2, col], [row + 3, col]]\r\n    else if rotation_angle == 180\r\n      cells = [[row, col], [row, col + 1], [row, col + 2], [row, col + 3]]\r\n    else if rotation_angle == 270\r\n      cells = [[row, col], [row + 1, col], [row + 2, col], [row + 3, col]]\r\n  else if el.classList.contains('tet-T')\r\n    if rotation_angle == 0\r\n      cells = [[row, col], [row, col + 1], [row, col + 2], [row + 1, col + 1]]\r\n    else if rotation_angle == 90\r\n      cells = [[row, col + 1], [row + 1, col], [row + 1, col + 1], [row + 2, col + 1]]\r\n    else if rotation_angle == 180\r\n      cells = [[row, col + 1], [row + 1, col], [row + 1, col + 1], [row + 1, col + 2]]\r\n    else if rotation_angle == 270\r\n      cells = [[row, col], [row + 1, col], [row + 1, col + 1], [row + 2, col]]\r\n  else if el.classList.contains('tet-L')\r\n    if rotation_angle == 0\r\n      cells = [[row, col], [row, col + 1], [row, col + 2], [row + 1, col]]\r\n    else if rotation_angle == 90\r\n      cells = [[row, col], [row, col + 1], [row + 1, col + 1], [row + 2, col + 1]]\r\n    else if rotation_angle == 180\r\n      cells = [[row, col + 2], [row + 1, col], [row + 1, col + 1], [row + 1, col + 2]]\r\n    else if rotation_angle == 270\r\n      cells = [[row, col], [row + 1, col], [row + 2, col], [row + 2, col + 1]]\r\n  else if el.classList.contains('tet-J')\r\n    if rotation_angle == 0\r\n      cells = [[row, col], [row, col + 1], [row, col + 2], [row + 1, col + 2]]\r\n    else if rotation_angle == 90\r\n      cells = [[row + 2, col], [row, col + 1], [row + 1, col + 1], [row + 2, col + 1]]\r\n    else if rotation_angle == 180\r\n      cells = [[row, col], [row + 1, col], [row + 1, col + 1], [row + 1, col + 2]]\r\n    else if rotation_angle == 270\r\n      cells = [[row, col], [row, col + 1], [row + 1, col], [row + 2, col]]\r\n  else if el.classList.contains('tet-S')\r\n    if rotation_angle == 0\r\n      cells = [[row, col + 1], [row, col + 2], [row + 1, col], [row + 1, col + 1]]\r\n    else if rotation_angle == 90\r\n      cells = [[row, col], [row + 1, col], [row + 1, col + 1], [row + 2, col + 1]]\r\n    else if rotation_angle == 180\r\n      cells = [[row, col + 1], [row, col + 2], [row + 1, col], [row + 1, col + 1]]\r\n    else if rotation_angle == 270\r\n      cells = [[row, col], [row + 1, col], [row + 1, col + 1], [row + 2, col + 1]]\r\n  else if el.classList.contains('tet-Z')\r\n    if rotation_angle == 0\r\n      cells = [[row, col], [row, col + 1], [row + 1, col + 1], [row + 1, col + 2]]\r\n    else if rotation_angle == 90\r\n      cells = [[row, col + 1], [row + 1, col], [row + 1, col + 1], [row + 2, col]]\r\n    else if rotation_angle == 180\r\n      cells = [[row, col], [row, col + 1], [row + 1, col + 1], [row + 1, col + 2]]\r\n    else if rotation_angle == 270\r\n      cells = [[row, col + 1], [row + 1, col], [row + 1, col + 1], [row + 2, col]]\r\n\r\n  return cells\r\n\r\nsnap_targets = (index) ->\r\n  inner = (x, y, interaction) ->\r\n    offset_y = window.pageYOffset or document.documentElement.scrollTop\r\n    offset_x = window.pageXOffset or document.documentElement.scrollLeft\r\n\r\n    outline_board_rect = outline_board.getBoundingClientRect()\r\n    table_top = outline_board_rect.top + offset_y\r\n    table_left = outline_board_rect.left + offset_x\r\n    el = interaction.element\r\n    data = get_tetramino_data(el)\r\n    idx = 0\r\n    for i in data.row_array\r\n      for j in data.col_array\r\n        if index == idx\r\n          for [r, c] in get_tetramino_indices(el, i, j)\r\n            if outline_board.rows[r].cells[c].getAttribute('data-number')\r\n              return {x: Infinity, y: Infinity, range: data.range}\r\n          return {\r\n            x: table_left + j * data.cell_size,\r\n            y: table_top + i * data.cell_size,\r\n            range: data.range\r\n          }\r\n        idx += 1\r\n  return inner\r\n\r\ninteract('.tetramino').draggable(\r\n  onstart: (evt)->\r\n    el = evt.target\r\n    if not el.classList.contains('snapped')\r\n      create_clone(el, tetramino_click_handler)\r\n    el.classList.remove('animate')\r\n    el.style.setProperty('z-index', 10000)\r\n    number = el.getAttribute('data-number')\r\n    if number\r\n      outline_board.querySelectorAll(\"[data-number='#{number}']\").forEach((e)->\r\n        e.removeAttribute('data-number')\r\n      )\r\n  onmove: (evt)->\r\n    el = evt.target\r\n    x = (parseFloat(el.dataset.x) or 0) + evt.dx\r\n    y = (parseFloat(el.dataset.y) or 0) + evt.dy\r\n    el.style.transform = \"translate(#{x}px, #{y}px) rotate(var(--rotation, 0))\"\r\n    el.dataset.x = x\r\n    el.dataset.y = y\r\n  onend: (evt)->\r\n    el = evt.target\r\n    snap = evt.modifiers[0]\r\n    snapped = snap.inRange\r\n    if snapped\r\n      el.classList.add('snapped')\r\n      el.style.removeProperty('z-index')\r\n      el.removeEventListener('click', tetramino_click_handler)\r\n      el.querySelectorAll('.cell').forEach((c)->\r\n        c.addEventListener('click', tetramino_color_click_handler)\r\n      )\r\n      data = get_tetramino_data(el)\r\n      row = Math.floor(snap.target.index / data.col_array.length)\r\n      col = snap.target.index % data.col_array.length\r\n      num = Math.random()\r\n      for [r, c] in get_tetramino_indices(el, row, col)\r\n        outline_board.rows[r].cells[c].setAttribute('data-number', num)\r\n        el.setAttribute('data-number', num)\r\n    else\r\n      number = el.getAttribute('data-number')\r\n      outline_board.querySelectorAll(\"[data-number='#{number}']\").forEach((e)->\r\n        e.removeAttribute('data-number')\r\n      )\r\n      color_class = el.querySelector('.cell').getAttribute('data-class')\r\n      if color_class\r\n        window.show_element(color_palette_dom.querySelector(\".#{color_class}\"))\r\n      el.remove()\r\n\r\n    game_grid.innerHTML = ''\r\n    document.querySelectorAll('.snapped').forEach((el)->\r\n      snapped_grid = el.querySelector('.outline-grid')\r\n      html = snapped_grid.innerHTML\r\n      rotation_angle = parseInt(el.getAttribute('data-rotation-angle')) or 0\r\n      el.style.setProperty('--rotation', \"0deg\")\r\n      snapped_rect = el.getBoundingClientRect()\r\n      el.style.setProperty('--rotation', \"#{rotation_angle}deg\")\r\n      source_cell_size = parseFloat(getComputedStyle(outline_board.querySelector('td')).width)\r\n      target_cell_size = parseFloat(getComputedStyle(game_board.querySelector('td')).width)\r\n      ratio = target_cell_size / source_cell_size\r\n      outline_board_rect = outline_board.getBoundingClientRect()\r\n      shift_x = (snapped_rect.left - outline_board_rect.left) * ratio\r\n      shift_y = (snapped_rect.top - outline_board_rect.top) * ratio\r\n      div = document.createElement('div')\r\n      div.style.left = \"#{shift_x}px\"\r\n      div.style.top = \"#{shift_y}px\"\r\n      div.style.transform = \"rotate(#{rotation_angle}deg)\"\r\n      [ox, oy] = getComputedStyle(el).transformOrigin.split(' ')\r\n      div.style.transformOrigin = \"#{parseFloat(ox) * ratio}px #{parseFloat(oy) * ratio}px\"\r\n      div.innerHTML = html\r\n      game_grid.appendChild(div)\r\n    )\r\n\r\n  modifiers: [\r\n    interact.modifiers.snap(\r\n      targets: (snap_targets(i) for i in [0...9])\r\n      relativePoints: [{x: 0, y: 0}]\r\n    )\r\n  ]\r\n).styleCursor(false)\r\n\r\ninteract('#outline table').dropzone(\r\n  accept: '.tetramino'\r\n  overlap: 0.8,\r\n)\r\n\r\ndocument.querySelectorAll('.node').forEach((node)->\r\n  node.addEventListener('click', ->\r\n    node.classList.toggle('disabled')\r\n  )\r\n)\r\n\r\ndocument.addEventListener('contextmenu', (evt)->\r\n  class_list = evt.target.classList\r\n  if class_list.contains('tetramino') or class_list.contains('board-item')\r\n    evt.preventDefault()\r\n)\r\n"
  ]
}